# –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ—î–∫—Ç—É Text RPG

## üìä –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º

### ‚úÖ 1. –ú–∞–≥–∞–∑–∏–Ω –≤–µ—â–µ–π (Shop)
**–°—Ç–∞—Ç—É—Å:** –ü–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

**–§–∞–π–ª–∏:**
- `src/screens/Shop.tsx` - UI –º–∞–≥–∞–∑–∏–Ω—É
- `src/data/shop/` - –¥–∞–Ω—ñ –º–∞–≥–∞–∑–∏–Ω—É:
  - `ngGradeShop.ts` - NG –≥—Ä–µ–π–¥
  - `dGradeShop.ts` - D –≥—Ä–µ–π–¥
  - `cGradeShop.ts` - C –≥—Ä–µ–π–¥
  - `sGradeShop.ts` - S –≥—Ä–µ–π–¥
  - `shopTypes.ts` - —Ç–∏–ø–∏
  - `itemMappings.ts` - –º–∞–ø–ø—ñ–Ω–≥ ID

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó: –û—Ä—É–∂–∏–µ, –ë—Ä–æ–Ω—è, –ë–∏–∂, –ú–∞—Ç–µ—Ä–∏–∞–ª—ã, –†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∏ –ø–æ –≥—Ä–µ–π–¥–∞—Ö (NG, D, C, B, A, S)
- ‚úÖ –ü—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –¥–ª—è –±—Ä–æ–Ω—ñ (–®–ª–µ–º, –¢–æ—Ä—Å, –®—Ç–∞–Ω–∏, –ü–µ—Ä—á–∞—Ç–∫–∏, –°–∞–ø–æ–≥–∏, –©–∏—Ç–∏)
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—ñ–≤ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- ‚úÖ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å–µ—Ç–∏
- ‚úÖ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

### ‚úÖ 2. –Ü–Ω–≤–µ–Ω—Ç–∞—Ä—å (Inventory)
**–°—Ç–∞—Ç—É—Å:** –ü–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

**–§–∞–π–ª–∏:**
- `src/screens/character/Inventory.tsx` - –æ—Å–Ω–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω —ñ–Ω–≤–µ–Ω—Ç–∞—Ä—è
- `src/components/InventoryPanel.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–Ω–µ–ª—ñ —ñ–Ω–≤–µ–Ω—Ç–∞—Ä—è
- `src/state/heroStore/heroInventory.ts` - –ª–æ–≥—ñ–∫–∞ –µ–∫—ñ–ø—ñ—Ä–æ–≤–∫–∏/–∑–Ω—è—Ç—Ç—è
- `src/config/inventoryConfig.ts` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
- ‚úÖ –ú–∞–∫—Å–∏–º—É–º 100 —Å–ª–æ—Ç—ñ–≤
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- ‚úÖ –ï–∫—ñ–ø—ñ—Ä–æ–≤–∫–∞/–∑–Ω—è—Ç—Ç—è –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- ‚úÖ –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- ‚úÖ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—ñ–≤ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

### ‚ö†Ô∏è 3. –ú–æ–±–∏ –ª–æ–∫–∞—Ü—ñ—ó (Mobile Locations)
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∫–æ–≤–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

**–§–∞–π–ª–∏:**
- `src/screens/Location.tsx` - –µ–∫—Ä–∞–Ω –ª–æ–∫–∞—Ü—ñ—ó –∑ –º–æ–±–∞–º–∏
- `src/data/world/` - –¥–∞–Ω—ñ —Å–≤—ñ—Ç—É —Ç–∞ –º—ñ—Å—Ç
- `src/data/zones/` - –∑–æ–Ω–∏ –∑ –º–æ–±–∞–º–∏

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞—Ü—ñ–π –ø—Ä–∞—Ü—é—î
- ‚úÖ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–æ–±—ñ–≤ –Ω–∞ –ª–æ–∫–∞—Ü—ñ—ó
- ‚úÖ –†–µ—Å–ø–∞–≤–Ω –º–æ–±—ñ–≤
- ‚úÖ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –º–æ–±—ñ–≤ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –¥—Ä–æ–ø, —Å–ø–æ–π–ª)
- ‚ö†Ô∏è **–ë–∞–≥–∞—Ç–æ –∑–æ–Ω –ø–æ—Ä–æ–∂–Ω—ñ** (floran_outskirts.ts, gludin_ruins.ts, wasteland.ts —Ç–æ—â–æ)
- ‚ö†Ô∏è **–ú–æ–±–∏ –±–µ–∑ –¥—Ä–æ–ø—ñ–≤ —Ç–∞ —Å–ø–æ–π–ª—ñ–≤**

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –∑–æ–Ω–∏ –º–æ–±–∞–º–∏
- –î–æ–¥–∞—Ç–∏ –¥—Ä–æ–ø–∏ –¥–æ –º–æ–±—ñ–≤
- –î–æ–¥–∞—Ç–∏ —Å–ø–æ–π–ª —Ä–µ—Å—É—Ä—Å–∏ –¥–æ –º–æ–±—ñ–≤

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

### ‚ö†Ô∏è 4. –î—Ä–æ–ø –∑ –º–æ–±—ñ–≤ (Drop from Mobs)
**–°—Ç–∞—Ç—É—Å:** –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞, –∞–ª–µ –º–æ–±–∏ –±–µ–∑ –¥—Ä–æ–ø—ñ–≤

**–§–∞–π–ª–∏:**
- `src/state/battle/helpers/processDrops.ts` - –æ–±—Ä–æ–±–∫–∞ –¥—Ä–æ–ø—ñ–≤
- `src/data/drop/floranMobDrops.ts` - –ø—Ä–æ—Ñ—ñ–ª—ñ –¥—Ä–æ–ø—ñ–≤ –¥–ª—è Floran
- `src/data/drop/raidBossDrops.ts` - –¥—Ä–æ–ø–∏ —Ä–µ–π–¥-–±–æ—Å—ñ–≤

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–∫–∏ –¥—Ä–æ–ø—ñ–≤ –ø—Ä–∞—Ü—é—î
- ‚úÖ –ü—Ä–æ—Ñ—ñ–ª—ñ –¥—Ä–æ–ø—ñ–≤ –¥–ª—è Floran –º–æ–±—ñ–≤
- ‚úÖ –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥—Ä–æ–ø—ñ–≤ –¥–æ —ñ–Ω–≤–µ–Ω—Ç–∞—Ä—è
- ‚ö†Ô∏è **–ú–æ–±–∏ –Ω–µ –º–∞—é—Ç—å –¥—Ä–æ–ø—ñ–≤** (–ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ `drops: DropEntry[]`)

**–¢–∏–ø–∏ –¥—Ä–æ–ø—ñ–≤:**
```typescript
interface DropEntry {
  id: string;        // ID –ø—Ä–µ–¥–º–µ—Ç–∞ –∑ itemsDB
  kind: DropKind;    // "adena" | "resource" | "equipment" | "other"
  chance: number;    // 0..1 (0.25 = 25%)
  min: number;       // –º—ñ–Ω. –∫—ñ–ª—å–∫—ñ—Å—Ç—å
  max: number;       // –º–∞–∫—Å. –∫—ñ–ª—å–∫—ñ—Å—Ç—å
}
```

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –î–æ–¥–∞—Ç–∏ `drops: DropEntry[]` –¥–æ –∫–æ–∂–Ω–æ–≥–æ –º–æ–±–∞
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—ñ –¥—Ä–æ–ø—ñ–≤ –∑ `floranMobDrops.ts` –∞–±–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

### ‚ö†Ô∏è 5. –°–ø–æ–π–ª —Ä–µ—Å—É—Ä—Å–∏ (Spoil Resources)
**–°—Ç–∞—Ç—É—Å:** –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞, –∞–ª–µ –º–æ–±–∏ –±–µ–∑ —Å–ø–æ–π–ª—ñ–≤

**–§–∞–π–ª–∏:**
- `src/state/battle/helpers/processDrops.ts` - –æ–±—Ä–æ–±–∫–∞ —Å–ø–æ–π–ª—ñ–≤ (—Ä—è–¥–∫–∏ 68-106)
- `src/data/skills/classes/DwarvenFighter/` - —Å–∫—ñ–ª–∏ —Å–ø–æ–π–ª—É:
  - `skill_0254.ts` - Spoil
  - `skill_0302.ts` - Spoil Festival
  - `skill_2541.ts` - Auto Spoil (toggle)

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–∫–∏ —Å–ø–æ–π–ª—ñ–≤ –ø—Ä–∞—Ü—é—î
- ‚úÖ –°–∫—ñ–ª–∏ —Å–ø–æ–π–ª—É —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ
- ‚úÖ Auto Spoil –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚ö†Ô∏è **–ú–æ–±–∏ –Ω–µ –º–∞—é—Ç—å —Å–ø–æ–π–ª—ñ–≤** (–ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ `spoil?: DropEntry[]`)

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. –ì—Ä–∞–≤–µ—Ü—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å–∫—ñ–ª Spoil –Ω–∞ –º–æ–±—ñ
2. –ú–æ–± –æ—Ç—Ä–∏–º—É—î –¥–µ–±–∞—Ñ "Spoiled"
3. –ö–æ–ª–∏ –º–æ–± –≤–±–∏—Ç–∏–π, –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —Å–ø–æ–π–ª —Ä–µ—Å—É—Ä—Å–∏
4. Auto Spoil –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ø–æ–π–ª–∏—Ç—å –º–æ–±—ñ–≤ –ø—Ä–∏ –≤–±–∏–≤—Å—Ç–≤—ñ

**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –î–æ–¥–∞—Ç–∏ `spoil?: DropEntry[]` –¥–æ –º–æ–±—ñ–≤, —è–∫—ñ –º–∞—é—Ç—å —Å–ø–æ–π–ª —Ä–µ—Å—É—Ä—Å–∏
- –ó–∞–∑–≤–∏—á–∞–π —Ü–µ —Ä–µ—Å—É—Ä—Å–∏ (–º–∞—Ç–µ—Ä—ñ–∞–ª–∏, –µ—Å–µ–Ω—Ü—ñ—ó —Ç–æ—â–æ)

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö –º–æ–±–∞

```typescript
interface Mob {
  id: string;
  name: string;
  level: number;
  icon?: string;
  
  // –†–µ—Å—É—Ä—Å–∏
  hp: number;
  mp: number;
  
  // –ë–æ–π–æ–≤—ñ —Å—Ç–∞—Ç–∏
  pAtk: number;
  mAtk: number;
  pDef: number;
  mDef: number;
  
  // –î–æ—Å–≤—ñ–¥ —Ç–∞ –≤–∞–ª—é—Ç–∞
  exp: number;
  sp?: number;
  adenaMin: number;
  adenaMax: number;
  
  // –î—Ä–æ–ø —Ç–∞ —Å–ø–æ–π–ª
  dropChance: number;      // 0..1 (0.25 = 25%)
  drops?: DropEntry[];      // –î—Ä–æ–ø –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
  spoil?: DropEntry[];      // –°–ø–æ–π–ª —Ä–µ—Å—É—Ä—Å–∏
}
```

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## üéØ –ü–ª–∞–Ω —Ä–æ–±–æ—Ç–∏

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1: –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –º–æ–±—ñ–≤ –¥—Ä–æ–ø–∞–º–∏ —Ç–∞ —Å–ø–æ–π–ª–∞–º–∏
1. –î–æ–¥–∞—Ç–∏ –¥—Ä–æ–ø–∏ –¥–æ —ñ—Å–Ω—É—é—á–∏—Ö –º–æ–±—ñ–≤ —É `floran_raid_lair.ts`
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—ñ –¥—Ä–æ–ø—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä—ñ–≤–Ω—ñ–≤ –º–æ–±—ñ–≤
3. –î–æ–¥–∞—Ç–∏ —Å–ø–æ–π–ª —Ä–µ—Å—É—Ä—Å–∏ –¥–æ –º–æ–±—ñ–≤, —è–∫—ñ –º–∞—é—Ç—å —Å–ø–æ–π–ª

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2: –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ –∑–æ–Ω–∏
1. `floran_outskirts.ts` - –æ–∫–æ–ª–∏—Ü—ñ Floran (–Ω–∏–∑—å–∫—ñ —Ä—ñ–≤–Ω—ñ)
2. `gludin_ruins.ts` - —Ä—É—ó–Ω–∏ Gludin
3. `wasteland.ts` - –ø—É—Å—Ç–µ–ª—è
4. –Ü–Ω—à—ñ –ø–æ—Ä–æ–∂–Ω—ñ –∑–æ–Ω–∏

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3: –ü–æ–∫—Ä–∞—â–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É –¥—Ä–æ–ø—ñ–≤
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ –¥—Ä–æ–ø—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä—ñ–≤–Ω—ñ–≤
2. –î–æ–¥–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É Champion –º–æ–±—ñ–≤ –∑ –∫—Ä–∞—â–∏–º–∏ –¥—Ä–æ–ø–∞–º–∏
3. –î–æ–¥–∞—Ç–∏ —Ä—ñ–¥–∫—ñ—Å–Ω—ñ –ø—Ä–µ–¥–º–µ—Ç–∏ –¥–æ –¥—Ä–æ–ø—ñ–≤

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏

### –ü—Ä–∏–∫–ª–∞–¥ –º–æ–±–∞ –∑ –¥—Ä–æ–ø–æ–º —Ç–∞ —Å–ø–æ–π–ª–æ–º:

```typescript
{
  id: "fl_mob_1",
  name: "Floran Scout",
  level: 15,
  hp: 5000,
  mp: 0,
  pAtk: 120,
  mAtk: 0,
  pDef: 60,
  mDef: 40,
  exp: 1500,
  adenaMin: 200,
  adenaMax: 400,
  dropChance: 0.5,
  drops: [
    { id: "adena", kind: "adena", chance: 1.0, min: 200, max: 400 },
    { id: "ng_sword_piece", kind: "resource", chance: 0.12, min: 1, max: 3 },
    { id: "soulshot_ng", kind: "consumable", chance: 0.35, min: 20, max: 60 },
  ],
  spoil: [
    { id: "plant_essence", kind: "resource", chance: 0.8, min: 2, max: 5 },
    { id: "magic_essence", kind: "resource", chance: 0.3, min: 1, max: 2 },
  ],
}
```

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## üîß –ö–æ—Ä–∏—Å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é –¥—Ä–æ–ø–∞ –¥–ª—è Floran –º–æ–±—ñ–≤:
```typescript
import { getFloranMobDropProfile } from "../data/drop/floranMobDrops";

const profile = getFloranMobDropProfile(mob);
// profile.items - –º–∞—Å–∏–≤ DropItem[]
```

### –û–±—Ä–æ–±–∫–∞ –¥—Ä–æ–ø—ñ–≤ –ø—Ä–∏ –≤–±–∏–≤—Å—Ç–≤—ñ –º–æ–±–∞:
```typescript
import { processMobDrops } from "../state/battle/helpers/processDrops";

const result = processMobDrops(mob, hero, spoiled);
// result.newInventory - –Ω–æ–≤–∏–π —ñ–Ω–≤–µ–Ω—Ç–∞—Ä
// result.dropMessages - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –¥—Ä–æ–ø
```

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## üìå –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

1. **–î—Ä–æ–ø–∏ —Ç–∞ —Å–ø–æ–π–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `itemsDB`** - –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ ID –ø—Ä–µ–¥–º–µ—Ç—ñ–≤ —ñ—Å–Ω—É—é—Ç—å –≤ `itemsDB`
2. **`dropChance`** - –∑–∞–≥–∞–ª—å–Ω–∏–π —à–∞–Ω—Å –¥—Ä–æ–ø–∞ (—è–∫—â–æ 0.5, —Ç–æ 50% —à–∞–Ω—Å —â–æ –±—É–¥–µ –¥—Ä–æ–ø –≤–∑–∞–≥–∞–ª—ñ)
3. **`chance` –≤ DropEntry** - —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π —à–∞–Ω—Å –∫–æ–∂–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ (—è–∫—â–æ –¥—Ä–æ–ø –≤–∏–ø–∞–≤)
4. **–°–ø–æ–π–ª–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ `spoiled = true`** (–º–æ–± –±—É–≤ —Å–ø–æ–π–ª–µ–Ω–∏–π)
5. **Auto Spoil** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `spoiled = true` –¥–ª—è BountyHunter –∑ –∞–∫—Ç–∏–≤–Ω–∏–º toggle

