# –ü—ñ–¥—Å—É–º–æ–∫ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó Backend API

## ‚úÖ –©–æ –≤–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ (–≥–æ—Ç–æ–≤–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞):

### 1. API Client (`src/utils/api.ts`)
- ‚úÖ –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è auth: `register()`, `login()`
- ‚úÖ –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è characters: `listCharacters()`, `getCharacter()`, `createCharacter()`, `updateCharacter()`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è Bearer token –¥–æ –∑–∞–ø–∏—Ç—ñ–≤
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### 2. Stores (Zustand)
- ‚úÖ `src/state/authStore.ts` - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- ‚úÖ `src/state/characterStore.ts` - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ characterId

### 3. Persistence (–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è)
- ‚úÖ `src/state/heroStore/heroPersistence.ts` - –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API
  - –°–ø–æ—á–∞—Ç–∫—É –ø—Ä–æ–±—É—î –∑–±–µ—Ä–µ–≥—Ç–∏ —á–µ—Ä–µ–∑ API
  - –Ø–∫—â–æ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π - fallback –Ω–∞ localStorage (backward compatibility)
  - –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ API - fallback –Ω–∞ localStorage

### 4. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- ‚úÖ `src/state/heroStore/heroLoadAPI.ts` - —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥–µ—Ä–æ—è –∑ API
  - –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î character –∑ API
  - –ö–æ–Ω–≤–µ—Ä—Ç—É—î character.heroJson –≤ Hero –æ–±'—î–∫—Ç
  - –ó–∞—Å—Ç–æ—Å–æ–≤—É—î –≤—Å—é –ª–æ–≥—ñ–∫—É –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–∫—É —Å—Ç–∞—Ç—ñ–≤ (—è–∫ –≤ localStorage –≤–µ—Ä—Å—ñ—ó)

### 5. Hero Store
- ‚úÖ `src/state/heroStore.ts` - –æ–Ω–æ–≤–ª–µ–Ω–æ `updateHero()` –¥–ª—è async –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## ‚è≥ –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ (UI —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è):

### 1. Register.tsx
**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –ó–∞–º—ñ–Ω–∏—Ç–∏ localStorage —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é –Ω–∞ API
- –í–∏–∫–ª–∏–∫–∞—Ç–∏ `register(login, password)` API
- –ó–±–µ—Ä–µ–≥—Ç–∏ token –≤ `useAuthStore.setToken(token)`
- –í–∏–∫–ª–∏–∫–∞—Ç–∏ `createCharacter({ name, race, classId: clazz, sex: gender })`
- –ó–±–µ—Ä–µ–≥—Ç–∏ characterId –≤ `useCharacterStore.setCharacterId(character.id)`
- –°—Ç–≤–æ—Ä–∏—Ç–∏ –≥–µ—Ä–æ—è —á–µ—Ä–µ–∑ `createNewHero()`
- –ó–±–µ—Ä–µ–≥—Ç–∏ heroJson —á–µ—Ä–µ–∑ `updateCharacter(characterId, { heroJson: hero })`
- –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥–µ—Ä–æ—è –≤ store

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ `handleSubmit` async, –¥–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫, loading state

### 2. Landing.tsx
**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –ó–∞–º—ñ–Ω–∏—Ç–∏ localStorage –ª–æ–≥—ñ–Ω –Ω–∞ API
- –í–∏–∫–ª–∏–∫–∞—Ç–∏ `login(login, password)` API
- –ó–±–µ—Ä–µ–≥—Ç–∏ token –≤ `useAuthStore.setToken(token)`
- –í–∏–∫–ª–∏–∫–∞—Ç–∏ `listCharacters()` API
- –í–∏–±—ñ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (—è–∫—â–æ —ó—Ö –∫—ñ–ª—å–∫–∞) –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ
- –ó–±–µ—Ä–µ–≥—Ç–∏ characterId –≤ `useCharacterStore.setCharacterId(character.id)`
- –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥–µ—Ä–æ—è —á–µ—Ä–µ–∑ `loadHeroFromAPI()`
- –ü–µ—Ä–µ–¥–∞—Ç–∏ –≥–µ—Ä–æ—è –≤ `onLogin()`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ `handleLogin` async, –¥–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫, –º–æ–∂–ª–∏–≤–æ UI –¥–ª—è –≤–∏–±–æ—Ä—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

### 3. App.tsx
**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `useAuthStore.initialize()` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `useCharacterStore.initialize()` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥–µ—Ä–æ—è –∑ API (—è–∫—â–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π)
- –Ø–∫—â–æ –Ω–µ –≤–∏–π—à–ª–æ - –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ localStorage (backward compatibility)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ `loadHero()` async –≤ `heroStore.ts` –∞–±–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `loadHeroFromAPI()` –æ–∫—Ä–µ–º–æ

### 4. heroStore.ts
**–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- –î–æ–¥–∞—Ç–∏ async –≤–µ—Ä—Å—ñ—é `loadHero()` –∞–±–æ –æ–∫—Ä–µ–º—É —Ñ—É–Ω–∫—Ü—ñ—é
- –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ API, —è–∫—â–æ –Ω–µ –≤–∏–π—à–ª–æ - –∑ localStorage

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## üìù –ü–ª–∞–Ω –¥—ñ–π (–ø–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è):

1. **–û–Ω–æ–≤–∏—Ç–∏ `Register.tsx`** (–Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–µ –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
2. **–û–Ω–æ–≤–∏—Ç–∏ `Landing.tsx`** (–¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
3. **–û–Ω–æ–≤–∏—Ç–∏ `App.tsx`** (—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è)
4. **–û–Ω–æ–≤–∏—Ç–∏ `heroStore.ts`** (async loadHero)

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –º–æ–º–µ–Ω—Ç–∏:

1. **Backward compatibility:** –í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –º–∞—é—Ç—å fallback –Ω–∞ localStorage, —è–∫—â–æ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π
2. **Async –æ–ø–µ—Ä–∞—Ü—ñ—ó:** –ë–∞–≥–∞—Ç–æ –æ–ø–µ—Ä–∞—Ü—ñ–π —Å—Ç–∞–ª–∏ async, –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
3. **Error handling:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ –≤ UI
4. **Loading states:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ loading states –¥–ª—è async –æ–ø–µ—Ä–∞—Ü—ñ–π

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:

1. –ü–æ—á–Ω—É—Ç–∏ –∑ `Register.tsx` - —Ü–µ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–µ –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
2. –ü–æ—Ç—ñ–º `Landing.tsx` - –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
3. –ü–æ—Ç—ñ–º `App.tsx` - –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
4. –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –∫–æ–∂–µ–Ω –∫—Ä–æ–∫ –æ–∫—Ä–µ–º–æ

<hr style="border: none; border-top: 2px dotted #C9B36B; margin: 20px 0;">

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, –ø–æ—Ç—Ä—ñ–±–Ω–∞ UI —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
