# üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ Railway (Internal Server Error)

## –ü—Ä–æ–±–ª–µ–º–∞
–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø–æ–≤–µ—Ä—Ç–∞—î "Internal Server Error" - —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –±–µ–∫–µ–Ω–¥ –æ—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç, –∞–ª–µ –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞.

## –©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ Railway

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Railway Dashboard: https://railway.app/dashboard
2. –ó–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç (backend)
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–µ—Ä–≤—ñ—Å
4. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Logs"** (–∞–±–æ **"Deployments"** ‚Üí –æ—Å—Ç–∞–Ω–Ω—ñ–π deployment ‚Üí **"View Logs"**)
5. –®—É–∫–∞–π—Ç–µ –ø–æ–º–∏–ª–∫–∏ (—á–µ—Ä–≤–æ–Ω–∏–π —Ç–µ–∫—Å—Ç)

### 2. –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏

**–ü–æ–º–∏–ª–∫–∞ 1: Prisma Client –Ω–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π**
```
Error: Cannot find module '@prisma/client'
```
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ `npm run prisma:generate` –≤ build –∫–æ–º–∞–Ω–¥—ñ Railway

**–ü–æ–º–∏–ª–∫–∞ 2: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞**
```
Error: Can't reach database server
```
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `DATABASE_URL` –≤ Railway Environment Variables

**–ü–æ–º–∏–ª–∫–∞ 3: JWT_SECRET –≤—ñ–¥—Å—É—Ç–Ω—ñ–π**
```
Error: secretOrPrivateKey must have a value
```
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `JWT_SECRET` –≤ Railway Environment Variables

**–ü–æ–º–∏–ª–∫–∞ 4: –¢–∞–±–ª–∏—Ü—ñ –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω—ñ**
```
Error: relation "Account" does not exist
```
**–†—ñ—à–µ–Ω–Ω—è:** –ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó Prisma –≤ Railway

**–ü–æ–º–∏–ª–∫–∞ 5: CORS –ø–æ–º–∏–ª–∫–∞**
```
Error: CORS
```
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–∞–ª–µ —Ü–µ –º–∞—î –¥–∞–≤–∞—Ç–∏ —ñ–Ω—à—É –ø–æ–º–∏–ª–∫—É)

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Environment Variables –Ω–∞ Railway

1. Railway Dashboard ‚Üí **Settings** ‚Üí **Variables**
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ:
   - `DATABASE_URL` = (connection string –∑ Supabase)
   - `JWT_SECRET` = (–¥–æ–≤–≥–∏–π –∫–ª—é—á)
   - `NODE_ENV` = `production` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
   - `PORT` = `3000` (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Build Command –Ω–∞ Railway

1. Railway Dashboard ‚Üí **Settings** ‚Üí **Deploy**
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ **Build Command:**
   ```
   npm install && npm run prisma:generate && npm run build
   ```
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ **Start Command:**
   ```
   npm start
   ```

### 5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Root Directory –Ω–∞ Railway

1. Railway Dashboard ‚Üí **Settings** ‚Üí **Deploy**
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ **Root Directory:**
   ```
   server
   ```

### 6. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó Prisma

–Ø–∫—â–æ —Ç–∞–±–ª–∏—Ü—ñ –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω—ñ, –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó:

**–í–∞—Ä—ñ–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Railway (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)**
1. Railway Dashboard ‚Üí **Settings** ‚Üí **Variables**
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `DATABASE_URL`
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å –¥–µ–ø–ª–æ—é (—è–∫—â–æ –≤ build –∫–æ–º–∞–Ω–¥—ñ —î `prisma migrate deploy`)

**–í–∞—Ä—ñ–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ Railway CLI (—è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)**
```bash
railway run npm run prisma:migrate:deploy
```

**–í–∞—Ä—ñ–∞–Ω—Ç –í: –ß–µ—Ä–µ–∑ Railway Deploy Logs**
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –¥–µ–ø–ª–æ—é - —Ç–∞–º –º–∞—î –±—É—Ç–∏ –≤–∏–≤—ñ–¥ –º—ñ–≥—Ä–∞—Ü—ñ–π Prisma

### 7. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—î –±–µ–∫–µ–Ω–¥

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ URL –±–µ–∫–µ–Ω–¥—É –≤ –±—Ä–∞—É–∑–µ—Ä—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `https://text-rpg-production.up.railway.app`)
2. –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ JSON –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Å–µ—Ä–≤–µ—Ä
3. –ê–±–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ `/health` endpoint:
   ```
   https://text-rpg-production.up.railway.app/health
   ```
4. –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏: `{"status":"ok"}`

### 8. –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –¥–æ–ø–æ–º–æ–≥–ª–æ

1. –°–∫–æ–ø—ñ—é–π—Ç–µ –ª–æ–≥–∏ –∑ Railway (–≤—Å—è –ø–æ–º–∏–ª–∫–∞)
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞—Ü—é—î –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (–≤—ñ–¥–∫—Ä–∏–π—Ç–µ Supabase Dashboard)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π `DATABASE_URL` (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ Supabase ‚Üí Settings ‚Üí Database ‚Üí Connection String)

## –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞

1. **Railway ‚Üí Logs** ‚Üí —à—É–∫–∞–π—Ç–µ —á–µ—Ä–≤–æ–Ω—ñ –ø–æ–º–∏–ª–∫–∏
2. **Railway ‚Üí Variables** ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ `DATABASE_URL` —Ç–∞ `JWT_SECRET`
3. **Supabase Dashboard** ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞—Ü—é—î –±–∞–∑–∞ –¥–∞–Ω–∏—Ö

## –î–∞–ª—ñ

–ü—ñ—Å–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ –≤ –ª–æ–≥–∞—Ö Railway - –ø–æ–≤—ñ–¥–æ–º—Ç–µ –º–µ–Ω–µ, —è –¥–æ–ø–æ–º–æ–∂—É –≤–∏–ø—Ä–∞–≤–∏—Ç–∏!
