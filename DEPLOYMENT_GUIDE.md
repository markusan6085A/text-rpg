# üöÄ –ì–∞–π–¥ –ø–æ –¥–µ–ø–ª–æ—é –≥—Ä–∏ –æ–Ω–ª–∞–π–Ω

## ‚úÖ –©–æ –≤–∂–µ –≥–æ—Ç–æ–≤–æ:
- ‚úÖ Backend (Fastify) –∑ API –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂—ñ–≤
- ‚úÖ Frontend (React/Vite) –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é API
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (Supabase PostgreSQL) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω–∏

## üìã –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º - —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏:

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ Environment Variables

#### Backend (`server/.env`):
```
DATABASE_URL=postgresql://postgres:[PASSWORD]@[HOST]:5432/postgres
JWT_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω–∏–π_–∫–ª—é—á_–º—ñ–Ω—ñ–º—É–º_32_—Å–∏–º–≤–æ–ª–∏
PORT=3000
```

#### Frontend (`.env.production` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É):
```
VITE_API_URL=https://–≤–∞—à-backend-url.com
```

### 2. –í–∏–±—ñ—Ä —Ö–æ—Å—Ç–∏–Ω–≥—É

#### –í–∞—Ä—ñ–∞–Ω—Ç –ê: Vercel (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ - –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π) ‚≠ê
- **Backend**: Vercel Serverless Functions (Fastify –∞–¥–∞–ø—Ç–µ—Ä)
- **Frontend**: Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- **–ü–ª—é—Å–∏**: –ü—Ä–æ—Å—Ç–∏–π –¥–µ–ø–ª–æ–π, –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π HTTPS
- **–ú—ñ–Ω—É—Å–∏**: –ú–æ–∂–µ –±—É—Ç–∏ —Ö–æ–ª–æ–¥–Ω–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è serverless —Ñ—É–Ω–∫—Ü–∏–π

#### –í–∞—Ä—ñ–∞–Ω—Ç –ë: VPS (–î–ª—è backend ‚Äî –ø–æ—Ç–æ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
- **Backend**: Railway/Render (Node.js)
- **Frontend**: Vercel/Netlify
- **–ü–ª—é—Å–∏**: –°—Ç–∞–±—ñ–ª—å–Ω–∏–π backend, –∑–∞–≤–∂–¥–∏ –æ–Ω–ª–∞–π–Ω
- **–ú—ñ–Ω—É—Å–∏**: –ú–æ–∂–µ –≤–∏–º–∞–≥–∞—Ç–∏ –ø–ª–∞—Ç–Ω—É –ø—ñ–¥–ø–∏—Å–∫—É –ø—ñ—Å–ª—è –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É

#### –í–∞—Ä—ñ–∞–Ω—Ç –í: All-in-one (Backend + Frontend –Ω–∞ –æ–¥–Ω–æ–º—É —Ö–æ—Å—Ç–∏–Ω–≥—É)
- **Railway**: Backend + Frontend —Ä–∞–∑–æ–º
- **Render**: Backend + Frontend —Ä–∞–∑–æ–º
- **–ü–ª—é—Å–∏**: –í—Å–µ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ
- **–ú—ñ–Ω—É—Å–∏**: –ú–æ–∂–µ –±—É—Ç–∏ –¥–æ—Ä–æ–∂—á–µ

### 3. –ö—Ä–æ–∫–∏ –¥–ª—è –¥–µ–ø–ª–æ—é –Ω–∞ Vercel (–í–∞—Ä—ñ–∞–Ω—Ç –ê - –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π)

#### 3.1. –ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ backend –¥–ª—è Vercel

1. –°—Ç–≤–æ—Ä–∏—Ç–∏ `server/vercel.json`:
```json
{
  "version": 2,
  "builds": [
    {
      "src": "src/index.ts",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "src/index.ts"
    }
  ],
  "env": {
    "DATABASE_URL": "@database_url",
    "JWT_SECRET": "@jwt_secret"
  }
}
```

2. –û–Ω–æ–≤–∏—Ç–∏ `server/src/index.ts` –¥–ª—è Vercel:
```typescript
// –î–æ–¥–∞—Ç–∏ –≤ –∫—ñ–Ω–µ—Ü—å —Ñ–∞–π–ª—É:
export default app; // –î–ª—è Vercel serverless
```

#### 3.2. –î–µ–ø–ª–æ–π backend –Ω–∞ Vercel

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –Ω–∞ [vercel.com](https://vercel.com) (—á–µ—Ä–µ–∑ GitHub)
2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Vercel CLI: `npm i -g vercel`
3. –£ –ø–∞–ø—Ü—ñ `server/`: `vercel`
4. –î–æ–¥–∞—Ç–∏ environment variables –≤ Vercel Dashboard:
   - `DATABASE_URL` (–∑ Supabase)
   - `JWT_SECRET` (–∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏: `node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"`)

#### 3.3. –î–µ–ø–ª–æ–π frontend –Ω–∞ Vercel

1. –°—Ç–≤–æ—Ä–∏—Ç–∏ `.env.production` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:
```
VITE_API_URL=https://–≤–∞—à-backend-vercel-url.vercel.app
```

2. –£ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É: `vercel`
3. –ê–±–æ —á–µ—Ä–µ–∑ GitHub:
   - –ü—É—à–Ω—É—Ç–∏ –∫–æ–¥ –Ω–∞ GitHub
   - –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–æ Vercel
   - Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–¥–µ–ø–ª–æ—ó—Ç—å

### 4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Railway (Backend + Frontend)

#### 4.1. Backend –Ω–∞ Railway

1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –Ω–∞ [railway.app](https://railway.app)
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç
3. –î–æ–¥–∞—Ç–∏ PostgreSQL (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Supabase)
4. –î–æ–¥–∞—Ç–∏ service "Node.js"
5. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π, –≤–∏–±—Ä–∞—Ç–∏ –ø–∞–ø–∫—É `server/`
6. –î–æ–¥–∞—Ç–∏ environment variables:
   - `DATABASE_URL`
   - `JWT_SECRET`
   - `PORT=3000`
7. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–¥–µ–ø–ª–æ—ó—Ç—å

#### 4.2. Frontend –Ω–∞ Railway (–∞–±–æ Netlify)

**Railway:**
1. –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π service "Static Site"
2. Build command: `npm run build`
3. Output directory: `dist`
4. Environment variables: `VITE_API_URL=https://–≤–∞—à-backend-url.railway.app`

**Netlify (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞):**
1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –Ω–∞ [netlify.com](https://netlify.com)
2. –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
3. Build settings:
   - Build command: `npm run build`
   - Publish directory: `dist`
4. Environment variables: `VITE_API_URL`

### 5. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CORS –¥–ª—è production

–û–Ω–æ–≤–∏—Ç–∏ `server/src/index.ts`:
```typescript
await app.register(cors, {
  origin: [
    "http://localhost:5173", // –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏
    "http://localhost:5174",
    "https://–≤–∞—à-frontend-url.vercel.app", // Production
    "https://–≤–∞—à-frontend-url.netlify.app",
  ],
  methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
  allowedHeaders: ["Content-Type", "Authorization"],
});
```

### 6. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Supabase –¥–ª—è production

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ RLS (Row Level Security) –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ connection string –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
3. –ú–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ connection pooling –¥–ª—è –∫—Ä–∞—â–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### 7. –§—ñ–Ω–∞–ª—å–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º

- [ ] Backend –ø—Ä–∞—Ü—é—î –ª–æ–∫–∞–ª—å–Ω–æ –∑ production DATABASE_URL
- [ ] Frontend –ø—Ä–∞—Ü—é—î –ª–æ–∫–∞–ª—å–Ω–æ –∑ production VITE_API_URL
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î end-to-end
- [ ] –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø—Ä–∞—Ü—é—î
- [ ] CORS –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] Environment variables –¥–æ–¥–∞–Ω—ñ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥—É

### 8. –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ backend –¥–æ—Å—Ç—É–ø–Ω–∏–π: `https://–≤–∞—à-backend-url.vercel.app/health`
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ frontend –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è
3. –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è
4. –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–∞–ª–æ–≥—ñ–Ω–∏—Ç–∏—Å—è
5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è

**–î–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—é Vercel (–≤–∞—Ä—ñ–∞–Ω—Ç –ê):**
- –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –¥–µ–ø–ª–æ–π
- –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π HTTPS
- –î–æ–±—Ä–µ –ø—Ä–∞—Ü—é—î –∑ React/Vite
- Backend —á–µ—Ä–µ–∑ serverless functions (–º–æ–∂–µ –±—É—Ç–∏ —Ç—Ä–æ—Ö–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ, –∞–ª–µ –¥–ª—è –ø–æ—á–∞—Ç–∫—É –æ–∫)

**–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π backend 24/7:**
- Railway –¥–ª—è backend
- Vercel/Netlify –¥–ª—è frontend

## ‚ùì –ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞?

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ –ø—ñ–¥ —á–∞—Å –¥–µ–ø–ª–æ—é, –Ω–∞–ø–∏—à—ñ—Ç—å:
1. –ù–∞ —è–∫–æ–º—É —Ö–æ—Å—Ç–∏–Ω–≥—É –¥–µ–ø–ª–æ—ó—Ç–µ
2. –Ø–∫–∞ –ø–æ–º–∏–ª–∫–∞ (–ª–æ–≥ –∑ –∫–æ–Ω—Å–æ–ª—ñ/—Ç–µ—Ä–º—ñ–Ω–∞–ª—É)
3. –©–æ –≤–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
