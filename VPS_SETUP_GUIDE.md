# üñ•Ô∏è –î–µ—Ç–∞–ª—å–Ω–∏–π –≥–∞–π–¥: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è VPS –¥–ª—è text-rpg

## üìã –ó–º—ñ—Å—Ç

1. [–í–∏–±—ñ—Ä VPS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞](#1-–≤–∏–±—ñ—Ä-vps-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞)
2. [–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞](#2-—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è-—Å–µ—Ä–≤–µ—Ä–∞)
3. [–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø–æ SSH](#3-–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è-–ø–æ-ssh)
4. [–ü–æ—á–∞—Ç–∫–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞](#4-–ø–æ—á–∞—Ç–∫–æ–≤–µ-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-—Å–µ—Ä–≤–µ—Ä–∞)
5. [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js](#5-–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-nodejs)
6. [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Docker —Ç–∞ PostgreSQL](#6-–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-docker-—Ç–∞-postgresql)
7. [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PM2](#7-–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-pm2)
8. [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è nginx](#8-–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-nginx)
9. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SSL (Let's Encrypt)](#9-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-ssl-lets-encrypt)
10. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–µ–ø–ª–æ—é –∑ GitHub](#10-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-–¥–µ–ø–ª–æ—é-–∑-github)
11. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Environment Variables](#11-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-environment-variables)
12. [–ü–µ—Ä—à–∏–π –¥–µ–ø–ª–æ–π](#12-–ø–µ—Ä—à–∏–π-–¥–µ–ø–ª–æ–π)
13. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É](#13-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É)
14. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)](#14-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É-–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
15. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è firewall](#15-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-firewall)
16. [Troubleshooting](#16-troubleshooting)

---

## 1. –í–∏–±—ñ—Ä VPS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏:

#### ‚≠ê **Hetzner** (–ù—ñ–º–µ—á—á–∏–Ω–∞) - –ù–∞–π–∫—Ä–∞—â–µ —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Ü—ñ–Ω–∞/—è–∫—ñ—Å—Ç—å
- **–¶—ñ–Ω–∞:** ‚Ç¨4-6/–º—ñ—Å—è—Ü—å
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:** 2-4 GB RAM, 1-2 CPU, 20-40 GB SSD
- **–ü–ª—é—Å–∏:** –®–≤–∏–¥–∫–∏–π, —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π, –¥–µ—à–µ–≤–∏–π
- **–ú—ñ–Ω—É—Å–∏:** –¢—ñ–ª—å–∫–∏ –Ñ–≤—Ä–æ–ø–∞
- **–°–∞–π—Ç:** https://www.hetzner.com/cloud

#### **DigitalOcean** (–°–®–ê, –≥–ª–æ–±–∞–ª—å–Ω–æ)
- **–¶—ñ–Ω–∞:** $6-12/–º—ñ—Å—è—Ü—å
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:** 1-2 GB RAM, 1 CPU, 25 GB SSD
- **–ü–ª—é—Å–∏:** –î–æ–±—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è, –±–∞–≥–∞—Ç–æ —Ä–µ–≥—ñ–æ–Ω—ñ–≤
- **–°–∞–π—Ç:** https://www.digitalocean.com

#### **Vultr** (–≥–ª–æ–±–∞–ª—å–Ω–æ)
- **–¶—ñ–Ω–∞:** $6-12/–º—ñ—Å—è—Ü—å
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:** 1-2 GB RAM, 1 CPU, 25 GB SSD
- **–ü–ª—é—Å–∏:** –ë–∞–≥–∞—Ç–æ —Ä–µ–≥—ñ–æ–Ω—ñ–≤, —à–≤–∏–¥–∫–∏–π
- **–°–∞–π—Ç:** https://www.vultr.com

#### **Contabo** (–ù—ñ–º–µ—á—á–∏–Ω–∞) - –ù–∞–π–¥–µ—à–µ–≤—à–∏–π
- **–¶—ñ–Ω–∞:** ‚Ç¨4-5/–º—ñ—Å—è—Ü—å
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:** 4 GB RAM, 2 CPU, 50 GB SSD
- **–ü–ª—é—Å–∏:** –î—É–∂–µ –¥–µ—à–µ–≤–æ, –±–∞–≥–∞—Ç–æ —Ä–µ—Å—É—Ä—Å—ñ–≤
- **–ú—ñ–Ω—É—Å–∏:** –ú–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
- **–°–∞–π—Ç:** https://www.contabo.com

### –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏ –¥–ª—è text-rpg:
- **RAM:** 1-2 GB (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 2 GB)
- **CPU:** 1-2 —è–¥—Ä–∞
- **–î–∏—Å–∫:** 20-40 GB SSD
- **–û–°:** Ubuntu 22.04 LTS (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

---

## 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞

### –ö—Ä–æ–∫ 1: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è –Ω–∞ –≤–∏–±—Ä–∞–Ω–æ–º—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å email

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è VPS
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Create Server"** –∞–±–æ **"New Server"**
3. –û–±–µ—Ä—ñ—Ç—å:
   - **–û–°:** Ubuntu 22.04 LTS
   - **–†–µ–≥—ñ–æ–Ω:** –ù–∞–π–±–ª–∏–∂—á–∏–π –¥–æ –≤–∞—à–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–Ñ–≤—Ä–æ–ø–∞ –¥–ª—è –£–∫—Ä–∞—ó–Ω–∏)
   - **–†–æ–∑–º—ñ—Ä:** 2 GB RAM, 1-2 CPU, 20-40 GB SSD
   - **SSH Key:** –î–æ–¥–∞–π—Ç–µ —Å–≤—ñ–π SSH –∫–ª—é—á (–∞–±–æ —Å—Ç–≤–æ—Ä–∏—Ç—å –ø—ñ–∑–Ω—ñ—à–µ)
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Create"** –∞–±–æ **"Deploy"**

### –ö—Ä–æ–∫ 3: –û—Ç—Ä–∏–º–∞—Ç–∏ IP —Ç–∞ –ø–∞—Ä–æ–ª—å
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –ø–æ–∫–∞–∂–µ **IP –∞–¥—Ä–µ—Å—É** —Å–µ—Ä–≤–µ—Ä–∞
- –Ø–∫—â–æ –Ω–µ –¥–æ–¥–∞–ª–∏ SSH –∫–ª—é—á, –æ—Ç—Ä–∏–º–∞—î—Ç–µ **root –ø–∞—Ä–æ–ª—å** (–∑–±–µ—Ä–µ–∂—ñ—Ç—å!)

---

## 3. –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø–æ SSH

### Windows (PowerShell –∞–±–æ Git Bash):

```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
ssh root@YOUR_IP_ADDRESS

# –ê–±–æ —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ SSH –∫–ª—é—á
ssh -i path/to/your/key.pem root@YOUR_IP_ADDRESS
```

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
ssh root@123.45.67.89
```

### –Ø–∫—â–æ –≤–ø–µ—Ä—à–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç–µ—Å—å:
- –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Ç–∞—î: `Are you sure you want to continue connecting (yes/no)?`
- –í–≤–µ–¥—ñ—Ç—å: `yes`
- –í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (—è–∫—â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ SSH –∫–ª—é—á)

### –Ø–∫—â–æ –Ω–µ –º–æ–∂–µ—Ç–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å:
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ IP
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ firewall –Ω–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–º–∞—î –±—É—Ç–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –ø–æ—Ä—Ç 22)
- –°–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ —ñ–Ω—à–∏–π —Ç–µ—Ä–º—ñ–Ω–∞–ª (Git Bash, WSL)

---

## 4. –ü–æ—á–∞—Ç–∫–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞

### –ö—Ä–æ–∫ 1: –û–Ω–æ–≤–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É

```bash
# –û–Ω–æ–≤–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç—ñ–≤
apt update

# –û–Ω–æ–≤–∏—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø–∞–∫–µ—Ç–∏
apt upgrade -y

# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
reboot
```

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∑–∞–º—ñ—Å—Ç—å root)

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
adduser deploy

# –î–æ–¥–∞—Ç–∏ –≤ –≥—Ä—É–ø—É sudo (–¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏—Ö –ø—Ä–∞–≤)
usermod -aG sudo deploy

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏—Å—å –Ω–∞ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
su - deploy
```

### –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ SSH –∫–ª—é—á (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –∞–ª–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

**–ù–∞ –≤–∞—à–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ (Windows):**

```bash
# –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ SSH –∫–ª—é—á (—è–∫—â–æ —â–µ –Ω–µ–º–∞—î)
ssh-keygen -t ed25519 -C "your_email@example.com"

# –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á
cat ~/.ssh/id_ed25519.pub
# –°–∫–æ–ø—ñ—é–π—Ç–µ –≤–µ—Å—å –≤–∏–≤—ñ–¥
```

**–ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ:**

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è SSH –∫–ª—é—á—ñ–≤
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
nano ~/.ssh/authorized_keys

# –í—Å—Ç–∞–≤–∏—Ç–∏ –≤–∞—à –ø—É–±–ª—ñ—á–Ω–∏–π –∫–ª—é—á (Ctrl+Shift+V)
# –ó–±–µ—Ä–µ–≥—Ç–∏: Ctrl+O, Enter, Ctrl+X

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø—Ä–∞–≤–∞
chmod 600 ~/.ssh/authorized_keys
```

### –ö—Ä–æ–∫ 4: –í–∏–º–∫–Ω—É—Ç–∏ –≤—Ö—ñ–¥ –ø–æ –ø–∞—Ä–æ–ª—é (–±–µ–∑–ø–µ–∫–∞)

```bash
# –í—ñ–¥–∫—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é SSH
sudo nano /etc/ssh/sshd_config

# –ó–Ω–∞–π—Ç–∏ —Ä—è–¥–æ–∫: #PasswordAuthentication yes
# –ó–º—ñ–Ω–∏—Ç–∏ –Ω–∞: PasswordAuthentication no

# –ó–±–µ—Ä–µ–≥—Ç–∏: Ctrl+O, Enter, Ctrl+X

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ SSH
sudo systemctl restart sshd
```

---

## 5. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js

### –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Node.js 20.x LTS (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):

```bash
# –û–Ω–æ–≤–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É
sudo apt update

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ curl (—è–∫—â–æ –Ω–µ–º–∞—î)
sudo apt install -y curl

# –î–æ–¥–∞—Ç–∏ NodeSource —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Node.js
sudo apt install -y nodejs

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–µ—Ä—Å—ñ—é
node --version  # –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ v20.x.x
npm --version   # –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ –≤–µ—Ä—Å—ñ—é npm
```

### –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω—ñ –ø–∞–∫–µ—Ç–∏:

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ PM2 –≥–ª–æ–±–∞–ª—å–Ω–æ (–ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏)
sudo npm install -g pm2

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
pm2 --version
```

---

## 6. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Docker —Ç–∞ PostgreSQL

### –í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ë–î:

**–í–∞—Ä—ñ–∞–Ω—Ç –ê: –õ–æ–∫–∞–ª—å–Ω–∞ PostgreSQL –Ω–∞ VPS (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è VPS)**
- ‚úÖ –®–≤–∏–¥—à–µ (–Ω–µ–º–∞—î –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞—Ç—Ä–∏–º–æ–∫)
- ‚úÖ –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ (–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω Supabase)
- ‚úÖ –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ backup

**–í–∞—Ä—ñ–∞–Ω—Ç –ë: Supabase (—è–∫ –Ω–∞ Railway)**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π backup
- ‚úÖ –ì–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- ‚ö†Ô∏è –ú–µ—Ä–µ–∂–µ–≤—ñ –∑–∞—Ç—Ä–∏–º–∫–∏
- ‚ö†Ô∏è –û–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –î–ª—è VPS –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É PostgreSQL —á–µ—Ä–µ–∑ Docker.

---

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Docker

```bash
# –û–Ω–æ–≤–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É
sudo apt update

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞–∫–µ—Ç–∏
sudo apt install -y ca-certificates curl gnupg lsb-release

# –î–æ–¥–∞—Ç–∏ Docker GPG –∫–ª—é—á
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# –î–æ–¥–∞—Ç–∏ Docker —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# –î–æ–¥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –≥—Ä—É–ø—É docker (—â–æ–± –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ sudo)
sudo usermod -aG docker $USER

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
docker --version
docker compose version
```

**–í–∞–∂–ª–∏–≤–æ:** –ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –≥—Ä—É–ø—É docker, –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–π—Ç–∏ —ñ –∑–Ω–æ–≤—É —É–≤—ñ–π—Ç–∏ –≤ SSH:

```bash
# –í–∏–π—Ç–∏ –∑ SSH
exit

# –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –∑–Ω–æ–≤—É
ssh deploy@YOUR_IP
```

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
sudo mkdir -p /opt/text-rpg
sudo chown $USER:$USER /opt/text-rpg
cd /opt/text-rpg
```

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ docker-compose.yml

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ docker-compose.yml
nano docker-compose.yml
```

**–í—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:**

```yaml
services:
  db:
    image: postgres:16
    restart: always
    environment:
      POSTGRES_DB: game
      POSTGRES_USER: game
      POSTGRES_PASSWORD: change_me_strong
    volumes:
      - pgdata:/var/lib/postgresql/data
    ports:
      - "127.0.0.1:5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U game -d game"]
      interval: 10s
      timeout: 5s
      retries: 5

volumes:
  pgdata:
```

**–ó–∞–º—ñ–Ω–∏—Ç–∏:**
- `change_me_strong` –Ω–∞ —Å–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º—É–º 16 —Å–∏–º–≤–æ–ª—ñ–≤)

**–ó–±–µ—Ä–µ–≥—Ç–∏:** `Ctrl+O`, `Enter`, `Ctrl+X`

### –ö—Ä–æ–∫ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ PostgreSQL

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ PostgreSQL
docker compose up -d

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
docker compose ps

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
docker compose logs db
```

**–ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏:** `database system is ready to accept connections`

### –ö—Ä–æ–∫ 5: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ PostgreSQL client (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
sudo apt install -y postgresql-client

# –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –¥–æ –ë–î
psql -h localhost -U game -d game
```

**–í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å** (—Ç–æ–π, —â–æ –≤–∫–∞–∑–∞–ª–∏ –≤ docker-compose.yml)

**–Ø–∫—â–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:**
```
game=#
```

**–í–∏–π—Ç–∏:** `\q` –∞–±–æ `Ctrl+D`

### –ö—Ä–æ–∫ 6: –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Docker Compose

Docker Compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ (—á–µ—Ä–µ–∑ `restart: always`), –∞–ª–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏–º–æ:

```bash
# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ç–µ—Å—Ç—É)
sudo reboot

# –ü—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
docker compose ps
```

---

## 7. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PM2

PM2 –≤–∂–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É –∫—Ä–æ—Ü—ñ, –∞–ª–µ –Ω–∞–ª–∞—à—Ç—É—î–º–æ –π–æ–≥–æ:

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ PM2 –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
pm2 startup

# –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É, —è–∫—É –ø–æ–∫–∞–∂–µ PM2, —ñ –≤–∏–∫–æ–Ω–∞—Ç–∏ —ó—ó
# –ü—Ä–∏–∫–ª–∞–¥: sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u deploy --hp /home/deploy

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
pm2 status
```

---

## 7. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è nginx

### –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ nginx:

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ nginx
sudo apt install -y nginx

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ nginx
sudo systemctl start nginx

# –î–æ–¥–∞—Ç–∏ –≤ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable nginx

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
sudo systemctl status nginx
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ nginx –¥–ª—è text-rpg:

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è text-rpg
sudo nano /etc/nginx/sites-available/text-rpg
```

**–í—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:**

```nginx
server {
    listen 80;
    server_name YOUR_DOMAIN_OR_IP;

    # –õ–æ–≥—É–≤–∞–Ω–Ω—è
    access_log /var/log/nginx/text-rpg-access.log;
    error_log /var/log/nginx/text-rpg-error.log;

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–¥–ª—è —Ñ–∞–π–ª—ñ–≤)
    client_max_body_size 10M;

    # –ü—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è –Ω–∞ Node.js —Å–µ—Ä–≤–µ—Ä (—è–∫–∏–π –ø—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É 3000)
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        # –¢–∞–π–º–∞—É—Ç–∏
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    # Health check endpoint (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
    location /health {
        proxy_pass http://localhost:3000/health;
        access_log off;
    }
}
```

**–ó–∞–º—ñ–Ω–∏—Ç–∏:**
- `YOUR_DOMAIN_OR_IP` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω –∞–±–æ IP –∞–¥—Ä–µ—Å—É

**–ó–±–µ—Ä–µ–≥—Ç–∏:** `Ctrl+O`, `Enter`, `Ctrl+X`

### –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∏–º–≤–æ–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
sudo ln -s /etc/nginx/sites-available/text-rpg /etc/nginx/sites-enabled/

# –í–∏–¥–∞–ª–∏—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (—è–∫—â–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞)
sudo rm /etc/nginx/sites-enabled/default

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é nginx
sudo nginx -t

# –Ø–∫—â–æ –≤—Å–µ –û–ö, –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ nginx
sudo systemctl reload nginx
```

---

## 9. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SSL (Let's Encrypt)

### –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Certbot:

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Certbot
sudo apt install -y certbot python3-certbot-nginx

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
certbot --version
```

### –û—Ç—Ä–∏–º–∞—Ç–∏ SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç:

**–Ø–∫—â–æ –º–∞—î—Ç–µ –¥–æ–º–µ–Ω:**

```bash
# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç (Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–ª–∞—à—Ç—É—î nginx)
sudo certbot --nginx -d your-domain.com -d www.your-domain.com

# –í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è:
# - Email: –≤–∞—à email
# - Terms: A (Agree)
# - Share email: N (No) –∞–±–æ Y (Yes)
```

**–Ø–∫—â–æ –ù–ï –º–∞—î—Ç–µ –¥–æ–º–µ–Ω (—Ç—ñ–ª—å–∫–∏ IP):**
- SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –¥–æ–º–µ–Ω—É
- –ú–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –¥–æ–º–µ–Ω (Freenom, No-IP) –∞–±–æ –∫—É–ø–∏—Ç–∏ ($1-2/—Ä—ñ–∫)
- –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–µ–∑ SSL (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è production)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—É:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
sudo certbot renew --dry-run
```

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–ª–∞—à—Ç—É—î cron job –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤.

---

## 10. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–µ–ø–ª–æ—é –∑ GitHub

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É:

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
mkdir -p ~/text-rpg
cd ~/text-rpg
```

### –ö—Ä–æ–∫ 2: –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

```bash
# –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π (–∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à)
git clone https://github.com/your-username/text-rpg.git .

# –ê–±–æ —è–∫—â–æ –ø—Ä–∏–≤–∞—Ç–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ SSH:
# git clone git@github.com:your-username/text-rpg.git .
```

### –ö—Ä–æ–∫ 3: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é server
cd ~/text-rpg/server

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install
```

### –ö—Ä–æ–∫ 4: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—é:

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—é
nano ~/deploy-text-rpg.sh
```

**–í—Å—Ç–∞–≤–∏—Ç–∏:**

```bash
#!/bin/bash

# –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è –≤–∏–≤–æ–¥—É
GREEN='\033[0;32m'
RED='\033[0;31m'
NC='\033[0m' # No Color

echo -e "${GREEN}üöÄ –ü–æ—á–∞—Ç–æ–∫ –¥–µ–ø–ª–æ—é text-rpg...${NC}"

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ–µ–∫—Ç—É
cd ~/text-rpg

# –û—Ç—Ä–∏–º–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ –∑ GitHub
echo -e "${GREEN}üì• –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–º—ñ–Ω –∑ GitHub...${NC}"
git pull origin main || git pull origin master

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é server
cd ~/text-rpg/server

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
echo -e "${GREEN}üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π...${NC}"
npm install

# –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ Prisma Client
echo -e "${GREEN}üîß –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è Prisma Client...${NC}"
npm run prisma:generate

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
echo -e "${GREEN}üóÑÔ∏è –ó–∞–ø—É—Å–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π...${NC}"
npm run prisma:migrate:deploy || echo -e "${RED}‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞ –º—ñ–≥—Ä–∞—Ü—ñ–π (–º–æ–∂–µ –±—É—Ç–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —è–∫—â–æ –≤–∂–µ –≤–∏–∫–æ–Ω–∞–Ω–æ)${NC}"

# –ó—ñ–±—Ä–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç
echo -e "${GREEN}üî® –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É...${NC}"
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ PM2
echo -e "${GREEN}üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2...${NC}"
pm2 restart text-rpg || pm2 start dist/index.js --name text-rpg

echo -e "${GREEN}‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ!${NC}"
pm2 status
```

**–ó–±–µ—Ä–µ–≥—Ç–∏:** `Ctrl+O`, `Enter`, `Ctrl+X`

**–ó—Ä–æ–±–∏—Ç–∏ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º:**

```bash
chmod +x ~/deploy-text-rpg.sh
```

---

## 11. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Environment Variables

### –°—Ç–≤–æ—Ä–∏—Ç–∏ .env —Ñ–∞–π–ª:

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é server
cd ~/text-rpg/server

# –°—Ç–≤–æ—Ä–∏—Ç–∏ .env —Ñ–∞–π–ª
nano .env
```

### –í–∞—Ä—ñ–∞–Ω—Ç –ê: –õ–æ–∫–∞–ª—å–Ω–∞ PostgreSQL (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è VPS)

**–í—Å—Ç–∞–≤–∏—Ç–∏ (–∑–∞–º—ñ–Ω—ñ—Ç—å `change_me_strong` –Ω–∞ –ø–∞—Ä–æ–ª—å –∑ docker-compose.yml):**

```env
# –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (–ª–æ–∫–∞–ª—å–Ω–∞ PostgreSQL –Ω–∞ VPS)
DATABASE_URL=postgresql://game:change_me_strong@localhost:5432/game

# JWT —Å–µ–∫—Ä–µ—Ç (–∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –Ω–æ–≤–∏–π!)
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long

# –ü–æ—Ä—Ç (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 3000)
PORT=3000

# –û—Ç–æ—á–µ–Ω–Ω—è
NODE_ENV=production
```

**–§–æ—Ä–º–∞—Ç DATABASE_URL –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –ë–î:**
```
postgresql://USER:PASSWORD@localhost:5432/DATABASE
```

–î–µ:
- `USER` = `game` (–∑ docker-compose.yml)
- `PASSWORD` = –ø–∞—Ä–æ–ª—å –∑ docker-compose.yml (–∑–∞–º—ñ–Ω—ñ—Ç—å `change_me_strong`)
- `DATABASE` = `game` (–∑ docker-compose.yml)

### –í–∞—Ä—ñ–∞–Ω—Ç –ë: Supabase (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Supabase)

**–í—Å—Ç–∞–≤–∏—Ç–∏ (–∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à—ñ –∑–Ω–∞—á–µ–Ω–Ω—è):**

```env
# –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (Supabase pooler –¥–ª—è runtime)
DATABASE_URL=postgresql://postgres.hstwsloooubalvpwasst:YOUR_PASSWORD@aws-1-eu-west-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1

# JWT —Å–µ–∫—Ä–µ—Ç (–∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –Ω–æ–≤–∏–π!)
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long

# –ü–æ—Ä—Ç (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 3000)
PORT=3000

# –û—Ç–æ—á–µ–Ω–Ω—è
NODE_ENV=production
```

**–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ JWT_SECRET:**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

**–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ñ –≤—Å—Ç–∞–≤–∏—Ç–∏ –≤ .env —è–∫ JWT_SECRET**

**–ó–±–µ—Ä–µ–≥—Ç–∏:** `Ctrl+O`, `Enter`, `Ctrl+X`

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—î PostgreSQL
docker compose ps

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ Prisma
cd ~/text-rpg/server
npm run prisma:generate
npm run prisma:migrate:deploy
```

**–Ø–∫—â–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó —É—Å–ø—ñ—à–Ω—ñ - –ë–î –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

---

## 12. –ü–µ—Ä—à–∏–π –¥–µ–ø–ª–æ–π

### –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—é:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—é
~/deploy-text-rpg.sh
```

### –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ PM2:

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é server
cd ~/text-rpg/server

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —á–µ—Ä–µ–∑ PM2
pm2 start dist/index.js --name text-rpg

# –ê–±–æ —è–∫—â–æ –≤–∂–µ –∑–∞–ø—É—â–µ–Ω–æ, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
pm2 restart text-rpg
```

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å PM2
pm2 status

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏
pm2 logs text-rpg

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —Å–µ—Ä–≤–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î
curl http://localhost:3000/health
```

**–ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏:** `{"status":"ok"}`

### –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:

–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
- `http://YOUR_IP_ADDRESS/health` (–∞–±–æ `https://your-domain.com/health`)
- –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏: `{"status":"ok"}`

---

## 13. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É

### PM2 –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –Ω–∞ –∫—Ä–æ—Ü—ñ 6, –∞–ª–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏–º–æ:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
pm2 startup

# –Ø–∫—â–æ –ø–æ–∫–∞–∂–µ –∫–æ–º–∞–Ω–¥—É, –≤–∏–∫–æ–Ω–∞–π—Ç–µ —ó—ó
# –ü—Ä–∏–∫–ª–∞–¥: sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u deploy --hp /home/deploy

# –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—ñ–≤
pm2 save
```

**–¢–µ–ø–µ—Ä –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞ PM2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å text-rpg!**

---

## 14. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### PM2 Monitoring (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ):

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ PM2 Plus (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –ø–æ—Ç—Ä–µ–±—É—î —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó)
pm2 link

# –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
pm2 monit
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ª–æ–≥–∏:

```bash
# –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ—Ç–∞—Ü—ñ—é –ª–æ–≥—ñ–≤
pm2 install pm2-logrotate

# –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
pm2 set pm2-logrotate:max_size 10M
pm2 set pm2-logrotate:retain 7
pm2 set pm2-logrotate:compress true
```

---

## 15. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è firewall

### –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ UFW (Uncomplicated Firewall):

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ UFW
sudo apt install -y ufw

# –î–æ–∑–≤–æ–ª–∏—Ç–∏ SSH (–í–ê–ñ–õ–ò–í–û! –Ü–Ω–∞–∫—à–µ –∑–∞–±–ª–æ–∫—É—î—Ç–µ —Å–µ–±–µ)
sudo ufw allow 22/tcp

# –î–æ–∑–≤–æ–ª–∏—Ç–∏ HTTP
sudo ufw allow 80/tcp

# –î–æ–∑–≤–æ–ª–∏—Ç–∏ HTTPS
sudo ufw allow 443/tcp

# –£–≤—ñ–º–∫–Ω—É—Ç–∏ firewall
sudo ufw enable

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
sudo ufw status
```

---

## 16. Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ PM2
pm2 logs text-rpg --lines 50

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —î –ø–æ–º–∏–ª–∫–∏ –≤ .env
cd ~/text-rpg/server
cat .env

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑—ñ–±—Ä–∞–Ω–æ –ø—Ä–æ–µ–∫—Ç
ls -la dist/
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–∂—É –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –ø–æ HTTP/HTTPS

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—î nginx
sudo systemctl status nginx

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—î Node.js —Å–µ—Ä–≤–µ—Ä
curl http://localhost:3000/health

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é nginx
sudo nginx -t

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ nginx
sudo tail -f /var/log/nginx/text-rpg-error.log
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î

**–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É PostgreSQL:**

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—î PostgreSQL
docker compose ps
cd /opt/text-rpg
docker compose logs db

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ DATABASE_URL
cd ~/text-rpg/server
cat .env | grep DATABASE_URL

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤—Ä—É—á–Ω—É
psql -h localhost -U game -d game
```

**–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Supabase:**

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ DATABASE_URL
cd ~/text-rpg/server
cat .env | grep DATABASE_URL

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∫–∞–∑–∞–Ω–æ pooler URL
# –ú–∞—î –±—É—Ç–∏ –ø–æ—Ä—Ç 6543, –Ω–µ 5432!
```

### –ü—Ä–æ–±–ª–µ–º–∞: PM2 –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
pm2 startup

# –ó–±–µ—Ä–µ–≥—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—ñ–≤
pm2 save

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
pm2 status
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å Certbot
sudo certbot certificates

# –û–Ω–æ–≤–∏—Ç–∏ –≤—Ä—É—á–Ω—É
sudo certbot renew

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ cron job
sudo systemctl status certbot.timer
```

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ß–µ–∫–ª–∏—Å—Ç:

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è: `pm2 status` –ø–æ–∫–∞–∑—É—î `text-rpg` online
- [ ] Health endpoint –ø—Ä–∞—Ü—é—î: `curl http://localhost:3000/health` ‚Üí `{"status":"ok"}`
- [ ] Nginx –ø—Ä–∞—Ü—é—î: `sudo systemctl status nginx` ‚Üí active
- [ ] SSL –ø—Ä–∞—Ü—é—î (—è–∫—â–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ): `https://your-domain.com/health` ‚Üí `{"status":"ok"}`
- [ ] Firewall –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ: `sudo ufw status` ‚Üí –∞–∫—Ç–∏–≤–Ω–∏–π
- [ ] –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∞—Ü—é—î: `pm2 save` –≤–∏–∫–æ–Ω–∞–Ω–æ, `pm2 startup` –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ

---

## üöÄ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É (–ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)

### –ö–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ —Ä–æ–±–∏—Ç–µ –∑–º—ñ–Ω–∏:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
~/deploy-text-rpg.sh
```

**–ê–±–æ –≤—Ä—É—á–Ω—É:**

```bash
cd ~/text-rpg
git pull
cd server
npm install
npm run prisma:generate
npm run build
pm2 restart text-rpg
```

---

## üìù –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ PM2
pm2 logs text-rpg

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
pm2 restart text-rpg

# –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
pm2 stop text-rpg

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
pm2 start text-rpg

# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ nginx
sudo systemctl reload nginx

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ nginx
sudo tail -f /var/log/nginx/text-rpg-error.log

# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
sudo reboot
```

---

## üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ–º–µ–Ω (—è–∫—â–æ —â–µ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)
2. ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ backup –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (Supabase –º–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π backup)
3. ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (PM2 Plus –∞–±–æ —ñ–Ω—à–∏–π —Å–µ—Ä–≤—ñ—Å)
4. ‚úÖ –û–Ω–æ–≤–∏—Ç–∏ VITE_API_URL –Ω–∞ Vercel (—è–∫—â–æ frontend –Ω–∞ Vercel)

---

**–ì–æ—Ç–æ–≤–æ! üéâ –í–∞—à text-rpg —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î –Ω–∞ VPS –±–µ–∑ cold start!**
